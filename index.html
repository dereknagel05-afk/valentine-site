<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üíõ</title>

<style>
:root{
  --bg:#f7efe0;
  --panel:#fff7ea;
  --ink:#2b2b2b;
  --border:#3a2f2a;
  --shadow:rgba(0,0,0,0.15);
  --heart:rgba(255,90,120,0.25);
  --pixel:"Courier New",monospace;
}
*{box-sizing:border-box}
body{
  margin:0;
  min-height:100vh;
  background:var(--bg);
  font-family:var(--pixel);
  color:var(--ink);
}

.bg-hearts{
  position:fixed;
  inset:0;
  pointer-events:none;
  background:
    radial-gradient(circle at 10% 20%, var(--heart) 0 12px, transparent 13px),
    radial-gradient(circle at 30% 70%, var(--heart) 0 10px, transparent 11px),
    radial-gradient(circle at 70% 30%, var(--heart) 0 14px, transparent 15px),
    radial-gradient(circle at 85% 75%, var(--heart) 0 11px, transparent 12px);
  opacity:.7;
}

.game{max-width:1100px;margin:auto;padding:18px}

.title{
  font-size:18px;
  padding:10px;
  background:var(--panel);
  border:4px solid var(--border);
  box-shadow:6px 6px 0 var(--shadow);
  margin-bottom:14px;
}

.scene{
  display:grid;
  grid-template-columns:1fr 520px;
  gap:18px;
}

.char{
  padding:12px;
  background:var(--panel);
  border:4px solid var(--border);
  box-shadow:6px 6px 0 var(--shadow);
  margin-bottom:14px;
}

.sprite-wrap{position:relative;height:120px}

.sprite{
  width:120px;height:120px;
  border:3px solid var(--border);
  background:#fff;
  image-rendering:pixelated;
}

.dino{background:#8ccf7a}
.unicorn{background:#d9c7ff}

.head{
  position:absolute;
  width:48px;height:48px;
  left:14px;bottom:56px;
  border:3px solid var(--border);
  background:#fff;
  opacity:0;
}

.bubble{
  margin-top:8px;
  padding:10px;
  border:3px solid var(--border);
  background:#fff;
}

.portrait-frame{
  position:relative;
  width:520px;height:520px;
  border:4px solid var(--border);
  background:var(--panel);
  box-shadow:8px 8px 0 var(--shadow);
  overflow:hidden;
}
#portrait{width:100%;height:100%;object-fit:cover}
#sparkCanvas{position:absolute;inset:0}

.dialog-box{
  margin-top:18px;
  padding:14px;
  background:var(--panel);
  border:4px solid var(--border);
  box-shadow:8px 8px 0 var(--shadow);
}

.text{
  min-height:90px;
  font-size:16px;
  padding:10px;
  border:3px solid var(--border);
  background:#fff;
  white-space:pre-wrap;
}

.controls{display:flex;gap:10px;margin-top:12px}
.btn{
  padding:10px 14px;
  border:3px solid var(--border);
  background:#fff;
  cursor:pointer;
}
.yes{background:#e7ffd9}
.no{background:#ffe3e3}

@media(max-width:980px){
.scene{grid-template-columns:1fr}
.portrait-frame{width:95vw;height:95vw}
}
</style>
</head>

<body>
<div class="bg-hearts"></div>

<div class="game">
<div class="title">‚ù§ Choose your quest ‚ù§</div>

<div class="scene">

<div>
<div class="char">
<div class="sprite-wrap">
<div id="dinoHead" class="head" style="background:#8ccf7a"></div>
<div class="sprite dino"></div>
</div>
<div class="bubble">i love you more</div>
</div>

<div class="char">
<div class="sprite-wrap">
<div id="uniHead" class="head" style="background:#d9c7ff"></div>
<div class="sprite unicorn"></div>
</div>
<div class="bubble">I love you most</div>
</div>
</div>

<div class="portrait-frame">
<img id="portrait" src="sad.png">
<canvas id="sparkCanvas" width="520" height="520"></canvas>
</div>

</div>

<div class="dialog-box">
<div id="speaker">Narrator</div>
<div id="dialogText" class="text"></div>

<div class="controls">
<button id="nextBtn" class="btn">Next</button>
<button id="yesBtn" class="btn yes">Yes</button>
<button id="noBtn" class="btn no">No</button>
</div>
</div>

</div>

<script>
// Dialogue pages
const pages=[
`Hey love.

I built this like a little game,
because being with you feels like a quest I want forever.`,

`I still catch myself thinking about
the smallest things you do.

The way you look at me,
like I am safe to be fully seen.`,

`You make ordinary moments feel sacred.

You make my heart calm down,
and then you make it race again.`,

`I love you when we are laughing.
I love you when life is loud.
I love you when things are hard,
and you still choose kindness anyway.`,

`I am not choosing you for a season.
I am choosing you for a lifetime.`,

`Will you be my forever?
Will you marry me?`
];

let pageIndex=0,typing=false;
const textEl=document.getElementById("dialogText");
const portrait=document.getElementById("portrait");
const dinoHead=document.getElementById("dinoHead");
const uniHead=document.getElementById("uniHead");

// typewriter
async function typePage(txt){
typing=true;
textEl.textContent="";
dinoHead.style.opacity=1;
uniHead.style.opacity=1;

for(let i=0;i<txt.length;i++){
textEl.textContent+=txt[i];
dinoHead.style.transform=`translateY(${i%2?0:-2}px)`;
uniHead.style.transform=`translateY(${i%2?0:-2}px)`;
await new Promise(r=>setTimeout(r,24));
}

dinoHead.style.opacity=0;
uniHead.style.opacity=0;
typing=false;
}

typePage(pages[0]);

document.getElementById("nextBtn").onclick=()=>{
if(!typing && pageIndex<pages.length-1){
pageIndex++;
typePage(pages[pageIndex]);
}
};

// YES action
document.getElementById("yesBtn").onclick=()=>{
portrait.src="happy.png";
launchSparks();
textEl.textContent=`You said yes.

I love you.
I am so proud to love you.

Come here.`;
};

// NO action
document.getElementById("noBtn").onclick=()=>{
portrait.src="sad.png";
textEl.textContent=`That is okay.

I will stay right here
until you are ready.`;
};

// pixel sparks
const canvas=document.getElementById("sparkCanvas");
const ctx=canvas.getContext("2d");
let sparks=[];

function launchSparks(){
for(let i=0;i<150;i++){
sparks.push({
x:260,y:260,
vx:(Math.random()-0.5)*6,
vy:-Math.random()*7,
g:0.2,
life:80
});
}
animate();
}

function animate(){
ctx.clearRect(0,0,520,520);
sparks.forEach(p=>{
p.vy+=p.g;
p.x+=p.vx;
p.y+=p.vy;
p.life--;
ctx.fillRect(p.x,p.y,4,4);
});
sparks=sparks.filter(p=>p.life>0);
if(sparks.length)requestAnimationFrame(animate);
}
</script>
</body>
</html>
